---
phase: 10-polish-and-empty-states
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - frontend/lib/screens/home_screen.dart
autonomous: true

must_haves:
  truths:
    - "User sees personalized greeting with their display name"
    - "User sees prominent Start Conversation button"
    - "User sees secondary Browse Projects button"
    - "User sees recent projects as quick access cards (if projects exist)"
    - "User sees encouraging message when no projects exist"
  artifacts:
    - path: "frontend/lib/screens/home_screen.dart"
      provides: "Redesigned home screen with user greeting and actions"
      min_lines: 100
  key_links:
    - from: "frontend/lib/screens/home_screen.dart"
      to: "AuthProvider"
      via: "Consumer for displayName"
      pattern: "Consumer<AuthProvider>"
    - from: "frontend/lib/screens/home_screen.dart"
      to: "ProjectProvider"
      via: "Consumer for recent projects"
      pattern: "Consumer<ProjectProvider>"
---

<objective>
Redesign home screen from developer-oriented "Next Steps" to user-oriented welcome with action buttons.

Purpose: Implement ONBOARD-04 and ONBOARD-05 - provide clear primary actions ("Start Conversation", "Browse Projects") and remove development phase information.

Output: User-friendly home screen with personalized greeting and quick access to key features.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/10-polish-and-empty-states/10-CONTEXT.md
@frontend/lib/screens/home_screen.dart
@frontend/lib/providers/auth_provider.dart
@frontend/lib/providers/project_provider.dart
</context>

<tasks>

<task type="auto">
  <name>Task 1: Redesign HomeScreen with user greeting and action buttons</name>
  <files>
    frontend/lib/screens/home_screen.dart
  </files>
  <action>
Completely rewrite HomeScreen to implement ONBOARD-04 and ONBOARD-05:

**Remove:**
- "Authentication Complete" card
- "Next Steps" section with phase references
- Development-focused messaging

**Add (following CONTEXT.md decisions):**

1. **Personalized greeting** at top:
   - Use Consumer<AuthProvider> to access displayName
   - Format: "Welcome back, [Name]" where Name is:
     - displayName if not null
     - email.split('@').first if displayName is null
     - "there" as final fallback
   - Style: theme.textTheme.headlineMedium, centered

2. **App icon/branding** (keep existing analytics icon but smaller, 64px)

3. **Action buttons section** (centered, stacked vertically):
   - Primary: FilledButton.icon "Start Conversation" with Icons.chat icon
     - onPressed: context.go('/projects') then show create thread flow
     - For now, navigate to projects list (user picks project then starts thread)
   - Secondary: OutlinedButton.icon "Browse Projects" with Icons.folder_outlined
     - onPressed: context.go('/projects')
   - Add SizedBox(height: 16) between buttons

4. **Recent Projects section** (below buttons):
   - Use Consumer<ProjectProvider>
   - Load projects in initState via addPostFrameCallback
   - Section header: "Recent Projects" with TextButton "See all" that navigates to /projects
   - Show up to 3 most recent projects as Cards:
     - Each card: project name, description (truncated), tap navigates to /projects/{id}
     - Use Wrap or Column with responsive layout
   - When no projects: show Text "No projects yet - create your first one!" in subtle style

5. **Layout structure:**
   - Convert to StatefulWidget (needed for initState project loading)
   - SingleChildScrollView with padding
   - ConstrainedBox maxWidth: 600 for centering on large screens
   - Column with crossAxisAlignment: center

**Navigation:**
- Import go_router for context.go() and context.push()
- "Start Conversation" goes to /projects (user picks project first)
- "Browse Projects" goes to /projects
- Project card tap goes to /projects/{projectId}
  </action>
  <verify>
    - `flutter analyze frontend/lib/screens/home_screen.dart` shows no errors
    - HomeScreen renders without crash
    - Greeting shows user name or email prefix
    - Both buttons navigate to projects
  </verify>
  <done>Home screen shows personalized greeting, primary/secondary action buttons, and recent projects list (or empty hint)</done>
</task>

</tasks>

<verification>
1. Run `flutter analyze` - no errors
2. Start app as authenticated user
3. Verify greeting shows user's name
4. Verify "Start Conversation" and "Browse Projects" buttons are visible
5. Verify buttons navigate to projects list
6. Verify recent projects show if user has projects
7. Verify empty hint shows if user has no projects
</verification>

<success_criteria>
- No "Authentication Complete" or "Next Steps" content
- Personalized greeting with user name/email
- FilledButton "Start Conversation" navigates to projects
- OutlinedButton "Browse Projects" navigates to projects
- Recent projects section shows up to 3 projects or empty hint
- All code passes flutter analyze
</success_criteria>

<output>
After completion, create `.planning/phases/10-polish-and-empty-states/10-02-SUMMARY.md`
</output>
