---
phase: 67-skill-info-popup
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - frontend/lib/screens/assistant/widgets/skill_card.dart
autonomous: true
requirements:
  - INFO-01
  - INFO-02
  - INFO-03

must_haves:
  truths:
    - "Each skill card in the browser grid has a visible info icon button"
    - "Tapping the info button opens a dialog showing the skill's full description and ALL features"
    - "Tapping the info button does NOT trigger skill selection (card onTap)"
    - "User can dismiss the info dialog by tapping Close button or tapping outside"
    - "Info dialog is readable on mobile, tablet, and desktop screen sizes"
  artifacts:
    - path: "frontend/lib/screens/assistant/widgets/skill_card.dart"
      provides: "SkillCard with info button and _showSkillInfoDialog function"
      contains: "Icons.info_outline"
  key_links:
    - from: "SkillCard info IconButton.onPressed"
      to: "showDialog with AlertDialog"
      via: "_showSkillInfoDialog helper function"
      pattern: "showDialog.*AlertDialog"
---

<objective>
Add an info button to each SkillCard and build a dialog that displays full skill details (description + all features).

Purpose: Users need to view detailed skill information before selecting a skill, allowing informed decision-making without committing to a selection.
Output: Updated SkillCard widget with info icon button and skill info AlertDialog.
</objective>

<execution_context>
@/Users/a1testingmac/.claude/get-shit-done/workflows/execute-plan.md
@/Users/a1testingmac/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md

@frontend/lib/screens/assistant/widgets/skill_card.dart
@frontend/lib/models/skill.dart
@frontend/lib/utils/skill_emoji.dart
@frontend/lib/widgets/responsive_layout.dart
@frontend/lib/widgets/document_preview_dialog.dart
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add info IconButton to SkillCard header row and build skill info dialog</name>
  <files>frontend/lib/screens/assistant/widgets/skill_card.dart</files>
  <action>
Modify `skill_card.dart` to add an info button and a dialog function. Two changes in one file:

**1. Add import for responsive_layout.dart** at the top:
```dart
import '../../../widgets/responsive_layout.dart';
```

**2. Add info IconButton to the header Row** (the Row containing emoji + name):

After the `Expanded` child containing the skill name text, add an `IconButton`:
```dart
IconButton(
  icon: const Icon(Icons.info_outline, size: 20),
  tooltip: 'More information',
  padding: const EdgeInsets.all(4),
  constraints: const BoxConstraints(),
  onPressed: () => _showSkillInfoDialog(context, skill, theme),
),
```

The `IconButton` inside the `Card > InkWell` naturally absorbs the tap event because IconButton has its own `onPressed` handler — Flutter's gesture arena gives priority to the more specific gesture detector. This prevents the InkWell's `onTap` (card selection) from firing. No extra GestureDetector wrapper needed.

**3. Create a top-level `_showSkillInfoDialog` function** (outside the class, or as a static method — place it as a private top-level function below the class):

```dart
void _showSkillInfoDialog(BuildContext context, Skill skill, ThemeData theme) {
  showDialog(
    context: context,
    barrierDismissible: true,
    builder: (BuildContext dialogContext) {
      return AlertDialog(
        title: Row(
          children: [
            Text(getSkillEmoji(skill.name), style: const TextStyle(fontSize: 24)),
            const SizedBox(width: 12),
            Expanded(
              child: Text(
                skill.name,
                style: theme.textTheme.titleLarge,
              ),
            ),
          ],
        ),
        content: SizedBox(
          width: context.isDesktop ? 500 : (context.isTablet ? 450 : 400),
          child: SingleChildScrollView(
            child: Column(
              mainAxisSize: MainAxisSize.min,
              crossAxisAlignment: CrossAxisAlignment.start,
              children: [
                // Full description (no line limit unlike card's 2-line truncation)
                Text(
                  skill.description,
                  style: theme.textTheme.bodyMedium,
                ),

                // ALL features (not limited to 3 like the card)
                if (skill.features.isNotEmpty) ...[
                  const SizedBox(height: 16),
                  const Divider(),
                  const SizedBox(height: 12),
                  Text(
                    'Features',
                    style: theme.textTheme.titleSmall?.copyWith(
                      fontWeight: FontWeight.bold,
                    ),
                  ),
                  const SizedBox(height: 8),
                  ...skill.features.map((feature) {
                    return Padding(
                      padding: const EdgeInsets.only(bottom: 4),
                      child: Row(
                        crossAxisAlignment: CrossAxisAlignment.start,
                        children: [
                          Text('• ', style: theme.textTheme.bodyMedium),
                          Expanded(
                            child: Text(
                              feature,
                              style: theme.textTheme.bodyMedium,
                            ),
                          ),
                        ],
                      ),
                    );
                  }),
                ],
              ],
            ),
          ),
        ),
        actions: [
          TextButton(
            onPressed: () => Navigator.of(dialogContext).pop(),
            child: const Text('Close'),
          ),
        ],
      );
    },
  );
}
```

Key design decisions:
- **No line limit on description** — dialog is the "full details" view vs card's 2-line preview
- **ALL features shown** — not limited to 3 like the card's preview
- **Responsive width**: 500px desktop, 450px tablet, 400px mobile (uses project's ResponsiveContext extension)
- **SingleChildScrollView** wraps content to handle overflow on small screens
- **barrierDismissible: true** — tap outside to dismiss (default behavior, explicit for clarity)
- **TextButton 'Close'** — standard Material dialog dismiss action
- **tooltip: 'More information'** on IconButton for accessibility
  </action>
  <verify>
Run `cd /Users/a1testingmac/projects/XtraSkill/frontend && dart analyze lib/screens/assistant/widgets/skill_card.dart` — must report no errors or warnings.

Visually confirm the file contains:
1. `Icons.info_outline` in the header Row
2. `_showSkillInfoDialog` function with `showDialog` and `AlertDialog`
3. Import for `responsive_layout.dart`
4. `SingleChildScrollView` wrapping dialog content
5. `barrierDismissible: true` on showDialog
6. TextButton with 'Close' in dialog actions
  </verify>
  <done>
- SkillCard header row shows emoji + name + info icon button (INFO-01)
- Info button opens AlertDialog with full description and all features (INFO-02)
- Dialog has Close button and tap-outside dismiss (INFO-03)
- Dialog uses responsive width for mobile/tablet/desktop readability
- Info button tap does NOT trigger card selection
  </done>
</task>

<task type="auto">
  <name>Task 2: Verify full integration with dart analyze</name>
  <files>frontend/lib/screens/assistant/widgets/skill_card.dart</files>
  <action>
Run full dart analyze on the project to verify no regressions:

```bash
cd /Users/a1testingmac/projects/XtraSkill/frontend && dart analyze lib/
```

Also verify that the SkillCard is still compatible with its usage in skill_browser_sheet.dart — confirm the constructor signature has not changed (still takes `skill`, `onTap`, `isSelected` params). The only changes are internal to the build method and a new top-level function.

If dart analyze reports any issues, fix them in skill_card.dart before proceeding.
  </action>
  <verify>
`dart analyze lib/` returns 0 errors and 0 warnings (infos are acceptable).
  </verify>
  <done>
- Full project dart analyze passes with no errors
- SkillCard constructor unchanged — no downstream breakage
- skill_browser_sheet.dart continues to work with updated SkillCard
  </done>
</task>

</tasks>

<verification>
1. `dart analyze lib/` passes with no errors
2. `skill_card.dart` contains `Icons.info_outline` IconButton in header Row
3. `skill_card.dart` contains `_showSkillInfoDialog` with `showDialog` and `AlertDialog`
4. Dialog shows full description (no maxLines truncation)
5. Dialog shows ALL features (no `.take(3)` limit)
6. Dialog has responsive width using `context.isDesktop` / `context.isTablet`
7. Dialog has `Close` TextButton action and `barrierDismissible: true`
8. SkillCard constructor signature unchanged (no breaking changes)
</verification>

<success_criteria>
- INFO-01: Each skill card has visible info_outline icon button in header row
- INFO-02: Tapping info opens AlertDialog with full description and complete feature list
- INFO-03: Dialog dismissible via Close button or tap outside barrier
- No regressions: dart analyze clean, SkillCard API unchanged
- Responsive: Dialog width adapts to mobile (400), tablet (450), desktop (500)
</success_criteria>

<output>
After completion, create `.planning/phases/67-skill-info-popup/67-01-SUMMARY.md`
</output>
