---
phase: 05-cross-platform-polish-launch
plan: 05
type: execute
wave: 3
depends_on: [05-01, 05-02, 05-03, 05-04]
files_modified: []
autonomous: false

must_haves:
  truths:
    - User can complete full workflow on Chrome, Firefox, Edge, and Safari
    - OAuth flows work correctly across all browsers
    - File upload and download work on all browsers
    - SSE streaming displays correctly on all browsers
    - Mobile devices display responsive layouts correctly
  artifacts: []
  key_links: []
---

<objective>
Verify cross-platform compatibility and production readiness through manual testing on multiple browsers and real devices before launch.

Purpose: Catch browser-specific bugs and platform inconsistencies that automated tests miss, validate OAuth flows work in production-like scenarios, ensure professional UX across all supported platforms.

Output: Verified compatibility matrix (browsers + devices), documented issues if any, production readiness checklist completed.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/05-cross-platform-polish-launch/05-RESEARCH.md

# Testing guidance from research
# Browser order: Chrome → Firefox → Edge → Safari (increasing complexity)
# Mobile: Test on real devices, not just simulators
</context>

<tasks>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>
    Cross-platform polish and deployment preparation:
    - Plan 05-01: Skeleton loaders and global error handlers
    - Plan 05-02: Widget tests and expanded backend integration tests
    - Plan 05-03: Production environment validation
    - Plan 05-04: Deployment configs and CI/CD pipeline

    All automated improvements complete. Now validating compatibility across browsers and devices.
  </what-built>
  <how-to-verify>
    **PART 1: Browser Compatibility Testing**

    Test on each browser in order: Chrome → Firefox → Edge → Safari (desktop versions)

    For each browser:
    1. **OAuth Flow:**
       - Navigate to http://localhost:8080
       - Click "Sign in with Google"
       - Complete OAuth flow in popup/redirect
       - Verify: Redirected to home screen with user authenticated
       - Log out
       - Click "Sign in with Microsoft"
       - Complete OAuth flow
       - Verify: Authenticated successfully

    2. **Data Loading States:**
       - Navigate to Projects screen
       - Verify: Skeleton loaders appear during fetch (gray pulsing cards)
       - Verify: Real projects appear after load
       - Open a project
       - Verify: Skeleton loaders for documents and threads tabs
       - Verify: Real data appears after load

    3. **File Operations:**
       - Navigate to Documents tab
       - Click upload button
       - Select a .txt file
       - Verify: File uploads successfully
       - Click document to view
       - Verify: Content displays correctly

    4. **AI Streaming:**
       - Navigate to Threads tab
       - Create new thread
       - Send message: "List 3 requirements for a login feature"
       - Verify: Streaming text appears progressively (word by word)
       - Verify: Final message is complete and readable
       - Verify: No streaming disconnects or errors

    5. **Error Handling:**
       - Kill backend server (Ctrl+C in terminal)
       - Try to load projects
       - Verify: SnackBar appears with "Failed to load projects" and Retry button
       - Click Retry (with server still down)
       - Verify: Error appears again
       - Restart backend server
       - Click Retry
       - Verify: Projects load successfully

    6. **Responsive Layout:**
       - Resize browser window from 1920px → 600px → 400px
       - Verify: Navigation changes from sidebar → drawer at <600px
       - Verify: No horizontal scrolling at any width
       - Verify: All content remains readable and accessible

    **Expected Browser Results:**
    - Chrome: All features work (reference browser)
    - Firefox: All features work (similar to Chrome)
    - Edge: All features work (Chromium-based)
    - Safari: OAuth redirects may differ, SSE streaming should work, file picker might look different but functional

    **PART 2: Mobile Device Testing**

    Test on at least 1 real device (Android or iOS):

    1. **Build mobile app:**
       ```bash
       cd frontend
       # Android
       flutter build apk --release
       # Install: adb install build/app/outputs/flutter-apk/app-release.apk

       # iOS (requires Mac)
       flutter build ios --release
       # Install via Xcode to physical device
       ```

    2. **Mobile OAuth:**
       - Open app on device
       - Sign in with Google
       - Verify: Deep link returns to app after OAuth
       - Verify: Home screen displays correctly

    3. **Mobile UI:**
       - Navigate through Projects → Documents → Threads
       - Verify: Drawer navigation (swipe from left or hamburger menu)
       - Verify: All text readable without pinch-zoom
       - Verify: Touch targets large enough (no mis-taps)

    4. **Mobile Streaming:**
       - Send AI message
       - Verify: Streaming works on cellular/WiFi
       - Verify: No disconnects during streaming

    **PART 3: Production Checklist**

    Verify these items:
    - [ ] All automated tests pass (CI/CD green)
    - [ ] Backend starts with ENVIRONMENT=production and valid config
    - [ ] .env.example documents all required variables
    - [ ] OAuth apps created for production with HTTPS redirect URIs
    - [ ] ANTHROPIC_API_KEY obtained from console.anthropic.com
    - [ ] SECRET_KEY generated with openssl rand -hex 32
    - [ ] Deployment configs present (Procfile, railway.json, render.yaml)
    - [ ] GitHub Actions workflow runs successfully

    **What to Document:**
    - Browser compatibility matrix (✓ or ✗ for each browser)
    - Any browser-specific issues found (describe symptom and browser)
    - Mobile device tested (model, OS version)
    - Any mobile-specific issues found
    - Production checklist completion status
  </how-to-verify>
  <resume-signal>
    Type "approved" if all browsers and mobile device work correctly, OR describe any issues found:
    - "approved" = All tests passed, ready for production deployment
    - "issue: [description]" = Found problem that needs fixing
    - "blocked: [reason]" = Cannot test (missing device, etc.)
  </resume-signal>
</task>

</tasks>

<verification>
This plan is verification-only (checkpoint task). Automated verification occurs in prior plans.

Success depends on user confirming:
- Cross-browser compatibility (4 desktop browsers)
- Mobile device compatibility (Android or iOS)
- Production configuration readiness
</verification>

<success_criteria>
- OAuth flows work in Chrome, Firefox, Edge, and Safari
- Skeleton loaders display during data fetch in all browsers
- Error handling shows SnackBars with retry in all browsers
- SSE streaming works without disconnects in all browsers
- File upload and download work in all browsers
- Mobile app (Android or iOS) works on real device with OAuth and UI
- Responsive layouts adapt correctly on mobile and desktop
- Production checklist items completed (configs, secrets, deployment files)
- No blocking issues found that prevent production deployment
</success_criteria>

<output>
After completion, create `.planning/phases/05-cross-platform-polish-launch/05-05-SUMMARY.md`
</output>
