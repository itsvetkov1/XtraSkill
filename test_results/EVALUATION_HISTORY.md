# BA Document Evaluation History

## Recent Evaluations

### 1. Transcript Import - BRD (Gemini-generated)
- **Date:** 2026-02-09
- **Document:** `business_requirements_document_-_transcript_analysis_extraction_2026-02-09.md`
- **Type:** Business Requirements Document (5 functional requirements, 4 personas)
- **Generated By:** BA Assistant (Gemini provider)
- **Score:** 78/100 — Usable with Fixes
- **Defects:** 2 Critical | 5 Major | 4 Minor (11 total)
- **Report:** `evaluator/transcript_brd_20260209_211500.md`
- **Top Issues:**
  1. Duplicate document title (recurring — 5th occurrence)
  2. Stale metadata date — October 2023 (recurring — 3rd occurrence)
  3. Hardcoded business values ("45 minutes") without source citation
  4. User story format leaking into BRD acceptance criteria ("As a BA, I want...")
  5. Missing complexity scale legend
- **What's Excellent:**
  - All 13 BRD sections present
  - Measurable KPIs with measurement methods (Section 9)
  - Current vs Future state comparison (Section 7)
  - Stakeholder analysis with concerns column (Section 8)
  - Risk matrix with mitigation strategies (Section 12)
  - Regulatory section with specific standards (AES-256, TLS 1.3, 7-year retention)
- **Prompt Fix Effectiveness:** PROMPT-FIX-009 (complexity sizing), 010 (personas), 011 (no UI leakage) all confirmed working. PROMPT-FIX-012 (duplicate title) and 013 (date) NOT working.
- **New Prompt Fixes:** PROMPT-FIX-016 (ban user story format in BRD ACs), PROMPT-FIX-017 (require complexity legend)

---

### 2. Transcript Import - User Stories (Gemini-generated)
- **Date:** 2026-02-09
- **Document:** `transcript_import_analysis_-_user_stories_2026-02-09.md`
- **Type:** User Stories (7 stories, 5 persona groups)
- **Generated By:** BA Assistant (Gemini provider)
- **Score:** 80/100 — Usable with Fixes
- **Defects:** 1 Critical | 4 Major | 3 Minor (8 total)
- **Report:** `evaluator/transcript_user_stories_20260209_211500.md`
- **Top Issues:**
  1. Duplicate document title (recurring — confirmed PROMPT-FIX-012 not enforced)
  2. Stale metadata date — October 2023 (recurring — confirmed PROMPT-FIX-013 not enforced)
  3. TLS version inconsistency with companion BRD (1.2 vs 1.3)
  4. Missing NFR stories (availability, backup, accessibility)
  5. "Configurable" values referenced but no configuration story
- **What's Excellent:**
  - Domain Definitions section with 5 terms — PROMPT-FIX-014 working
  - Complexity sizing on every story (S/M/L/XL) — PROMPT-FIX-009 working
  - Specific personas throughout (no generic "user") — PROMPT-FIX-010 working
  - No UI implementation leakage — PROMPT-FIX-011 working
  - 2 exception handlers per story (14 total) — exceptional coverage
  - Explicit dependency mapping with summary section
  - Configurable threshold pattern used consistently
- **Highest User Stories score to date** — +28 points from first evaluation (52 → 80)
- **New Prompt Fixes:** PROMPT-FIX-018 (cross-document consistency), PROMPT-FIX-019 (configuration story for configurable values)

---

### 3. BA Assistant - Business Requirements Document (BRD)
- **Date:** 2026-02-08
- **Document:** `BRD.md`
- **Type:** Business Requirements Document (23 requirements, 4 personas)
- **Score:** 82/100 — Usable with Fixes (High End)
- **Defects:** 0 Critical | 4 Major | 4 Minor (8 total)
- **Report:** `evaluator/brd_ba_assistant_20260208_192000.md`
- **Top Issues:**
  1. "Baseline TBD" in KPIs - undefined metrics
  2. Vague qualitative terms ("professional", "smooth", "reliable")
  3. Missing dedicated NFR section (availability, capacity, accessibility)
  4. P1/P2 requirements lack error scenarios
- **What's Excellent:**
  - Complete template adherence (all 13 BRD sections)
  - Detailed personas with demographics, pain points, goals
  - User flows with error scenarios
  - Priority classification (P0/P1/P2) with business rationale
  - Stakeholder analysis with concerns column
  - Risk matrix with mitigation strategies
- **Recommendation:** Top 10% of evaluated documents; apply fixes before stakeholder review

---

### 4. BA AI Assistant - User Stories & Acceptance Criteria
- **Date:** 2026-02-08
- **Document:** `ba_ai_assistant_-_user_stories_acceptance_criteria_2026-02-08.md`
- **Type:** User Stories (5 stories, 2 persona groups)
- **Score:** 71/100 — Usable with Fixes
- **Defects:** 3 Critical | 5 Major | 3 Minor (11 total)
- **Report:** `evaluator/ba_ai_assistant_user_stories_20260208_190500.md`
- **Top Issues:**
  1. Duplicate document titles
  2. Undefined core concepts (Risk Impact Score, Industry Standard Framework, Success Threshold)
  3. Outdated metadata date (October 2023)
  4. No story sizing/estimation
  5. Missing NFR section
- **What's Good:**
  - Has metadata, priorities, dependencies, glossary
  - Error scenarios present (2 per story)
  - Uses configurable threshold pattern
  - Testable numeric thresholds in most ACs
- **Prompt Fixes Recommended:** 3 (core concept definitions, metadata dates, story sizing)

---

### 5. Prompt Enhancement Feature - User Stories
- **Date:** 2026-02-08
- **Document:** `prompt_enhancement_feature_-_user_stories_2026-02-08.md`
- **Type:** User Stories (4 stories, 2 persona groups)
- **Generated By:** Production system prompt (`.planning/legacy/SYSTEM-PROMPT-business-analyst.md`)
- **Score:** 68/100 — Significant Rework Needed (Upper Bound)
- **Defects:** 3 Critical | 6 Major | 4 Minor (13 total)
- **Report:** `evaluator/prompt_enhancement_feature_user_stories_20260208_220000.md`
- **Report Revision:** 1.1 — Updated with root cause analysis after confirming generation source
- **Top Issues:**
  1. Duplicate document title (recurring pattern)
  2. Stale metadata date — October 2023 (recurring pattern)
  3. Missing story sizing/complexity indicators (recurring pattern)
  4. "System user" persona too generic — no specific persona definition
  5. UI implementation leakage in ACs (buttons, tooltips, labels specified)
  6. "Minimum Context Score" concept undefined in Definitions section
- **Systemic Fix (APPLIED 2026-02-08):** 4 targeted gaps fixed in both `ai_service.py` and `SKILL.md`.

---

### 6. Smart Inventory Forecasting System - User Stories
- **Date:** 2026-02-08
- **Document:** `smart_inventory_forecasting_system_-_user_stories_2026-02-07.md`
- **Type:** User Stories (24 stories, 4 persona groups)
- **Score:** 52/100 — Significant Rework Required
- **Defects:** 6 Critical | 11 Major | 8 Minor (25 total)
- **Report:** `evaluator/smart_inventory_forecasting_system_-_user_stories_20260208_010604.md`
- **Top Issues:**
  1. Pervasive untestable acceptance criteria (vague qualifiers like "real-time", "where relevant")
  2. Zero error/exception paths across all 24 stories
  3. No priority classification or dependency mapping
  4. Hardcoded business values contradicting configurability stories
  5. AI stories written as system actor instead of user-centric
- **Prompt Fixes Recommended:** 5 (PROMPT-FIX-001 through PROMPT-FIX-005)

---

## Defect Pattern Index

| Pattern | Frequency | Severity | First Seen | Status |
|---------|-----------|----------|------------|--------|
| Duplicate document titles | **5 documents** | Critical | 2026-02-08 | **Open — PROMPT-FIX-012 not enforced** |
| Outdated metadata dates | **4 documents** | Major | 2026-02-08 | **Open — PROMPT-FIX-013 not enforced** |
| Vague qualifiers in ACs | 6 occurrences | Critical | 2026-02-08 | Open |
| Missing error/exception paths | 24 stories affected | Critical | 2026-02-08 | **Improving — new docs have 2/story** |
| No priority classification | 24 stories affected | Critical | 2026-02-08 | **Fixed in new docs** |
| Hardcoded business values | 7 occurrences | Major | 2026-02-08 | Open |
| Missing NFR stories/section | 4 documents | Major | 2026-02-08 | Open |
| Undefined core concepts | 5+ concepts (3 docs) | Major | 2026-02-08 | **Improving — definitions section now present** |
| Missing story sizing | 3 documents | Major | 2026-02-08 | **Fixed in new docs (PROMPT-FIX-009)** |
| Passive voice hiding actors | 4 occurrences | Major | 2026-02-08 | Open |
| System-as-actor stories | 5 stories | Major | 2026-02-08 | **Fixed (PROMPT-FIX-010)** |
| Missing document metadata | 1 document | Critical | 2026-02-08 | **Fixed** |
| UI implementation leakage | 1 document (6 ACs) | Major | 2026-02-08 | **Fixed (PROMPT-FIX-011)** |
| Generic persona ("system user") | 1 document (3 stories) | Major | 2026-02-08 | **Fixed (PROMPT-FIX-010)** |
| **User story format in BRD ACs** | **1 document (3 ACs)** | **Major** | **2026-02-09** | **New** |
| **Cross-document inconsistency** | **1 pair (TLS versions)** | **Major** | **2026-02-09** | **New** |
| **Configurable values without config story** | **1 document (3 values)** | **Major** | **2026-02-09** | **New** |

---

## Prompt Improvement Tracking

| ID | Pattern Addressed | Impact Score | Status | Effectiveness |
|----|-------------------|-------------|--------|---------------|
| PROMPT-FIX-001 | Vague qualifiers in ACs | 76 | Proposed | Pending |
| PROMPT-FIX-002 | Missing error scenarios | 68 | Proposed | **Confirmed effective** — new docs have 2 exceptions/story |
| PROMPT-FIX-003 | Missing metadata | 52 | Proposed | Pending |
| PROMPT-FIX-004 | No priority/dependencies | 48 | Proposed | **Confirmed effective** — new docs have P0/P1 + dependency map |
| PROMPT-FIX-005 | Hardcoded values | 42 | Proposed | Pending |
| PROMPT-FIX-006 | Undefined core concepts | 54 | Proposed | **Partially effective** — definitions section present but not exhaustive |
| PROMPT-FIX-007 | Stale metadata dates | 32 | Proposed | Pending |
| PROMPT-FIX-008 | Missing story sizing | 40 | Proposed | Pending |
| PROMPT-FIX-009 | Complexity indicator (S/M/L/XL) | 42 | **Applied** | **Confirmed effective** — present on all stories in new docs |
| PROMPT-FIX-010 | Ban generic "user"/"system user" | 46 | **Applied** | **Confirmed effective** — specific personas throughout |
| PROMPT-FIX-011 | Ban UI implementation details | 46 | **Applied** | **Confirmed effective** — no UI leakage in new docs |
| PROMPT-FIX-012 | No duplicate document titles | 38 | **Applied** | **NOT effective** — still occurring (5 consecutive docs) |
| PROMPT-FIX-013 | Enforce current date | 42 | **Applied** | **NOT effective** — still hallucinating October 2023 |
| PROMPT-FIX-014 | Post-generation concept definition scan | 54 | **Applied** | **Confirmed effective** — Domain Definitions section present |
| PROMPT-FIX-015 | Enforce single document title (stronger) | 58 | Proposed | Root cause: artifact title injection creating duplicate H1 |
| PROMPT-FIX-016 | Ban user story format in BRD ACs | 52 | Proposed | New — detected in Transcript BRD |
| PROMPT-FIX-017 | Require complexity scale legend | 38 | Proposed | New — detected in Transcript BRD |
| PROMPT-FIX-018 | Cross-document consistency check | 44 | Proposed | New — TLS 1.2 vs 1.3 inconsistency |
| PROMPT-FIX-019 | Config story for configurable values | 40 | Proposed | New — 3 configurable values without config story |

---

## Score Trend

| Document | Date | Score | Verdict | Provider |
|----------|------|-------|---------|----------|
| BA Assistant BRD | 2026-02-08 | 82/100 | Usable with Fixes (High) | Anthropic |
| **Transcript Import User Stories** | **2026-02-09** | **80/100** | **Usable with Fixes** | **Gemini** |
| **Transcript Import BRD** | **2026-02-09** | **78/100** | **Usable with Fixes** | **Gemini** |
| BA AI Assistant User Stories | 2026-02-08 | 71/100 | Usable with Fixes | Anthropic |
| Prompt Enhancement User Stories | 2026-02-08 | 68/100 | Significant Rework (Upper) | Anthropic |
| Smart Inventory Forecasting | 2026-02-08 | 52/100 | Significant Rework | Unknown |

### Key Observations (2026-02-09)

**Prompt fix effectiveness confirmed:** 4 of 6 applied prompt fixes (PROMPT-FIX-009, 010, 011, 014) are confirmed working. The remaining 2 (012, 013) need root cause investigation — likely the duplicate title comes from artifact title injection and the stale date from model training data override.

**Gemini provider parity:** The Gemini-generated documents (78 and 80) score within the same range as Anthropic-generated ones (71-82). This confirms the prompt engineering is provider-agnostic and the quality gates transfer across models.

**User Stories trajectory:** 52 → 68 → 71 → **80** over 4 evaluations. The improvement curve is flattening, suggesting the remaining defects (duplicate title, stale date, missing NFRs) require architectural fixes (artifact title injection, date injection from server) rather than prompt changes.

**Remaining systemic issues (require code fixes, not prompt fixes):**
1. Duplicate title — investigate `ai_service.py` artifact title injection adding a second H1
2. Stale date — inject server-side `datetime.now()` into the generation context instead of relying on model knowledge
3. Missing NFRs — add NFR story template to the generation prompt

---

*Last updated: 2026-02-09 21:15*
*Revision 2.0: Added evaluations #5 and #6 (Transcript Import BRD + User Stories, Gemini provider)*
