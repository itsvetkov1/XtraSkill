# Phase 60: Frontend Integration - Context

**Gathered:** 2026-02-15
**Status:** Ready for planning

<domain>
## Phase Boundary

Add Claude Code providers (SDK and CLI) to the frontend so users can select and use them for conversations. This covers provider selection in settings, streaming display for new providers, and end-to-end chat functionality. Quality comparison testing is Phase 61.

</domain>

<decisions>
## Implementation Decisions

### Provider selection UX
- Flat list in settings dropdown: all providers listed equally (Anthropic, OpenAI, Claude Code (SDK), Claude Code (CLI))
- Show "Experimental" badge/tag next to Claude Code provider names
- Display the underlying model name (e.g., "Claude Code (SDK) — Claude Sonnet 4") so user knows what runs underneath
- Provider selection is Settings-only — all new threads use the globally selected provider, no per-thread choice

### Streaming display
- Thinking blocks use the same display as the current direct API provider (existing collapsible thinking UI)
- Tool execution (search_documents, save_artifact) shows a subtle/generic indicator (spinner or "Working...") — no detailed tool-by-tool display
- Artifacts generated by Claude Code providers appear identically to direct API artifacts — no distinction
- No visual difference in chat bubbles between providers — all AI responses look the same regardless of source

### Provider switching
- Changing provider in Settings only affects new threads — existing threads keep the provider they were created with
- Thread info/details panel shows which provider was used to create the thread (useful for Phase 61 comparison)
- If Claude Code provider is unavailable (not installed, can't start), allow selection but show clear error when user tries to send a message
- Provider selection persists across sessions — app remembers last-used provider

### Error & status feedback
- CLI subprocess startup delay uses the existing typing/loading indicator — no special treatment
- Provider errors (subprocess crash, SDK failure) display inline in chat as an error bubble where the response would have been
- Error messages are user-friendly with an expandable "Show details" toggle for technical info (exit codes, stack traces)
- Retry button on error bubbles — same pattern as existing retry behavior for direct API failures

### Claude's Discretion
- Exact wording of experimental badge
- Loading indicator implementation details
- Error message copy and formatting
- How thread info panel displays provider (fits existing thread info patterns)

</decisions>

<specifics>
## Specific Ideas

No specific requirements — open to standard approaches. The goal is to make Claude Code providers feel like natural additions to the existing provider system, not bolted-on experiments.

</specifics>

<deferred>
## Deferred Ideas

None — discussion stayed within phase scope

</deferred>

---

*Phase: 60-frontend-integration*
*Context gathered: 2026-02-15*
