# Requirements Archive: v1.9.2 Resilience & AI Transparency

**Archived:** 2026-02-04
**Status:** ✅ SHIPPED

This is the archived requirements specification for v1.9.2.
For current requirements, see `.planning/REQUIREMENTS.md` (created for next milestone).

---

## v1.9.2 Requirements

Requirements for Resilience & AI Transparency milestone. Each maps to roadmap phases.

### Network Resilience

- [x] **NET-01**: On network loss during SSE streaming, partial AI content is preserved (not cleared)
- [x] **NET-02**: Error banner displays "Connection lost - response incomplete" when stream interrupted
- [x] **NET-03**: Retry button available to regenerate interrupted response
- [x] **NET-04**: Copy button remains functional for partial content in error state

### Token Budget UX

- [x] **BUD-01**: Warning banner at 80% budget usage: "You've used 80% of your token budget"
- [x] **BUD-02**: Warning banner at 95% usage: "Almost at limit - limited messages remaining"
- [x] **BUD-03**: At 100%: Clear "Budget exhausted" state in ConversationScreen
- [x] **BUD-04**: Exhausted state allows viewing history but blocks sending new messages
- [x] **BUD-05**: Budget display shows percentage only (no monetary amounts)

### Mode Indicator

- [x] **MODE-01**: Current conversation mode shown as chip/badge in ConversationScreen AppBar
- [x] **MODE-02**: Mode badge is tappable to open mode change menu
- [x] **MODE-03**: Mode change shows warning about potential context shift
- [x] **MODE-04**: Mode persists in database for that thread (survives app restart)

### Artifact Generation UI

- [x] **ART-01**: "Generate Artifact" button visible in ConversationScreen
- [x] **ART-02**: Artifact type picker with options: User Stories, Acceptance Criteria, BRD, Custom
- [x] **ART-03**: Generated artifacts have inline export buttons (Markdown, PDF, Word)
- [x] **ART-04**: Artifacts visually distinct from regular chat messages (card styling)

### Document Sources

- [x] **SRC-01**: AI responses show source document chips when documents were referenced
- [x] **SRC-02**: Source chips display document names: "Sources: requirements.md, notes.txt"
- [x] **SRC-03**: Clicking source chip opens Document Viewer for that document
- [x] **SRC-04**: If no documents used in response, no source section shown

### File Validation

- [x] **FILE-01**: File size validated client-side before upload attempt
- [x] **FILE-02**: Clear error message: "File too large. Maximum size is 1MB."
- [x] **FILE-03**: Invalid file selection cleared, user can immediately try again

## v2.0 Deferred

Features acknowledged but not in current milestone scope.

### Network Resilience Extras
- Auto-reconnect with exponential backoff (requires eventflux migration)
- Network state detection banner (requires connectivity_plus)

### Budget Extras
- Real-time budget display during conversation (not just Settings)
- Estimated messages remaining calculation

### Artifact Extras
- Dedicated Artifacts tab showing all generated artifacts
- Artifact editing before export

## Out of Scope

| Feature | Reason |
|---------|--------|
| Monetary budget display | User preference: percentages only |
| Full eventflux migration | Risk: web support experimental; keep current SSE for now |
| Artifact versioning | Complexity: defer to future milestone |
| Document source highlighting | Complexity: would require storing chunk positions |

## Traceability

| Requirement | Phase | Status |
|-------------|-------|--------|
| NET-01 | Phase 34 | Complete |
| NET-02 | Phase 34 | Complete |
| NET-03 | Phase 34 | Complete |
| NET-04 | Phase 34 | Complete |
| FILE-01 | Phase 34 | Complete |
| FILE-02 | Phase 34 | Complete |
| FILE-03 | Phase 34 | Complete |
| BUD-01 | Phase 35 | Complete |
| BUD-02 | Phase 35 | Complete |
| BUD-03 | Phase 35 | Complete |
| BUD-04 | Phase 35 | Complete |
| BUD-05 | Phase 35 | Complete |
| MODE-01 | Phase 35 | Complete |
| MODE-02 | Phase 35 | Complete |
| MODE-03 | Phase 35 | Complete |
| MODE-04 | Phase 35 | Complete |
| ART-01 | Phase 36 | Complete |
| ART-02 | Phase 36 | Complete |
| ART-03 | Phase 36 | Complete |
| ART-04 | Phase 36 | Complete |
| SRC-01 | Phase 36 | Complete |
| SRC-02 | Phase 36 | Complete |
| SRC-03 | Phase 36 | Complete |
| SRC-04 | Phase 36 | Complete |

**Coverage:**
- v1.9.2 requirements: 24 total
- Mapped to phases: 24
- Completed: 24 ✓

---

## Milestone Summary

**Shipped:** 24 of 24 requirements
**Adjusted:** None
**Dropped:** None

---

*Archived: 2026-02-04 as part of v1.9.2 milestone completion*
