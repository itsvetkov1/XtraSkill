# BA Document Evaluation History

## Recent Evaluations

### 1. BA Assistant - Business Requirements Document (BRD)
- **Date:** 2026-02-08
- **Document:** `BRD.md`
- **Type:** Business Requirements Document (23 requirements, 4 personas)
- **Score:** 82/100 — Usable with Fixes (High End)
- **Defects:** 0 Critical | 4 Major | 4 Minor (8 total)
- **Report:** `evaluator/brd_ba_assistant_20260208_192000.md`
- **Top Issues:**
  1. "Baseline TBD" in KPIs - undefined metrics
  2. Vague qualitative terms ("professional", "smooth", "reliable")
  3. Missing dedicated NFR section (availability, capacity, accessibility)
  4. P1/P2 requirements lack error scenarios
- **What's Excellent:**
  - Complete template adherence (all 13 BRD sections)
  - Detailed personas with demographics, pain points, goals
  - User flows with error scenarios
  - Priority classification (P0/P1/P2) with business rationale
  - Stakeholder analysis with concerns column
  - Risk matrix with mitigation strategies
- **Recommendation:** Top 10% of evaluated documents; apply fixes before stakeholder review

---

### 2. BA AI Assistant - User Stories & Acceptance Criteria (test_results/evaluator/)
- **Date:** 2026-02-08
- **Document:** `ba_ai_assistant_-_user_stories_acceptance_criteria_2026-02-08.md`
- **Type:** User Stories (5 stories, 2 persona groups)
- **Score:** 71/100 — Usable with Fixes
- **Defects:** 3 Critical | 5 Major | 3 Minor (11 total)
- **Report:** `evaluator/ba_ai_assistant_user_stories_20260208_190500.md`
- **Top Issues:**
  1. Duplicate document titles
  2. Undefined core concepts (Risk Impact Score, Industry Standard Framework, Success Threshold)
  3. Outdated metadata date (October 2023)
  4. No story sizing/estimation
  5. Missing NFR section
- **What's Good:**
  - Has metadata, priorities, dependencies, glossary
  - Error scenarios present (2 per story)
  - Uses configurable threshold pattern
  - Testable numeric thresholds in most ACs
- **Prompt Fixes Recommended:** 3 (core concept definitions, metadata dates, story sizing)

---

### 3. Prompt Enhancement Feature - User Stories
- **Date:** 2026-02-08
- **Document:** `prompt_enhancement_feature_-_user_stories_2026-02-08.md`
- **Type:** User Stories (4 stories, 2 persona groups)
- **Generated By:** Production system prompt (`.planning/legacy/SYSTEM-PROMPT-business-analyst.md`)
- **Score:** 68/100 — Significant Rework Needed (Upper Bound)
- **Defects:** 3 Critical | 6 Major | 4 Minor (13 total)
- **Report:** `evaluator/prompt_enhancement_feature_user_stories_20260208_220000.md`
- **Report Revision:** 1.1 — Updated with root cause analysis after confirming generation source
- **Top Issues:**
  1. Duplicate document title (recurring pattern)
  2. Stale metadata date — October 2023 (recurring pattern)
  3. Missing story sizing/complexity indicators (recurring pattern)
  4. "System user" persona too generic — no specific persona definition
  5. UI implementation leakage in ACs (buttons, tooltips, labels specified)
  6. "Minimum Context Score" concept undefined in Definitions section
- **Root Cause (Revised):** Defects are NOT caused by model ignoring rules — the Artifact Quality Gates from SKILL.md were never ported to the production system prompt. The production `<quality_validation>` section only has 5 surface-level checks vs SKILL.md's 12+ quality gates. Model performs better than expected given prompt gaps (naturally produces error scenarios, priorities, dependencies).
- **What's Good:**
  - Metadata header present (version, author, status, project, scope) — model's natural behavior, not prompt-driven
  - Error scenarios present (2 per story — all 4 stories) — model's natural behavior, not prompt-driven
  - Configurable threshold pattern used (timeout, context score)
  - Priority classification (P0/P1/P2) with dependency mapping
  - Dependency summary section included
  - Definitions section with 3 terms
- **What's New (Not Seen Before):**
  - UI implementation leakage pattern (specifying buttons, tooltips, labels) — gap in both SKILL.md and production prompt
  - Subjective "gibberish" detection criterion
- **Systemic Fix (APPLIED 2026-02-08):** Discovery revealed the production prompt (`ai_service.py`) already had most quality gates — the legacy file was stale. 4 targeted gaps fixed: (1) complexity indicator S/M/L/XL added, (2) generic "user"/"system user" explicitly banned, (3) UI implementation details rule added (new rule 8), (4) duplicate title prevention added (new rule 9). Also strengthened: date enforcement, concept definition scanning, quality_validation expanded to 15 checks. Both `ai_service.py` and `SKILL.md` updated. Legacy file marked stale.

---

### 4. Smart Inventory Forecasting System - User Stories
- **Date:** 2026-02-08
- **Document:** `smart_inventory_forecasting_system_-_user_stories_2026-02-07.md`
- **Type:** User Stories (24 stories, 4 persona groups)
- **Score:** 52/100 — Significant Rework Required
- **Defects:** 6 Critical | 11 Major | 8 Minor (25 total)
- **Report:** `evaluator/smart_inventory_forecasting_system_-_user_stories_20260208_010604.md`
- **Top Issues:**
  1. Pervasive untestable acceptance criteria (vague qualifiers like "real-time", "where relevant")
  2. Zero error/exception paths across all 24 stories
  3. No priority classification or dependency mapping
  4. Hardcoded business values contradicting configurability stories
  5. AI stories written as system actor instead of user-centric
- **Prompt Fixes Recommended:** 5 (PROMPT-FIX-001 through PROMPT-FIX-005)

---

## Defect Pattern Index

| Pattern | Frequency | Severity | First Seen | Status |
|---------|-----------|----------|------------|--------|
| Vague qualifiers in ACs ("real-time", "where relevant", "gracefully") | 6 occurrences | Critical | 2026-02-08 | Open |
| Missing error/exception paths | 24 stories affected | Critical | 2026-02-08 | Open |
| No priority classification | 24 stories affected | Critical | 2026-02-08 | Open |
| Hardcoded business values | 6 occurrences | Major | 2026-02-08 | Open |
| Passive voice hiding actors | 4 occurrences | Major | 2026-02-08 | Open |
| System-as-actor stories | 5 stories | Major | 2026-02-08 | Open |
| Missing document metadata | 1 document | Critical | 2026-02-08 | Open |
| Undefined core concepts | 5+ concepts (3 docs) | Major | 2026-02-08 | Open |
| Duplicate document titles | 3 documents | Critical | 2026-02-08 | Open |
| Outdated metadata dates | 2 documents | Major | 2026-02-08 | Open |
| Missing story sizing | 3 documents | Major | 2026-02-08 | Open |
| Missing NFR section | 3 documents | Major | 2026-02-08 | Open |
| **UI implementation leakage** | **1 document (6 ACs)** | **Major** | **2026-02-08** | **New** |
| **Subjective detection criteria** | **1 document (1 AC)** | **Major** | **2026-02-08** | **New** |
| **Generic persona ("system user")** | **1 document (3 stories)** | **Major** | **2026-02-08** | **New** |

---

## Prompt Improvement Tracking

| ID | Pattern Addressed | Impact Score | Status | Effectiveness |
|----|-------------------|-------------|--------|---------------|
| PROMPT-FIX-001 | Vague qualifiers in ACs | 76 | Proposed | Pending |
| PROMPT-FIX-002 | Missing error scenarios | 68 | Proposed | Pending |
| PROMPT-FIX-003 | Missing metadata | 52 | Proposed | Pending |
| PROMPT-FIX-004 | No priority/dependencies | 48 | Proposed | Pending |
| PROMPT-FIX-005 | Hardcoded values | 42 | Proposed | Pending |
| PROMPT-FIX-006 | Undefined core concepts | 54 | Proposed | Pending |
| PROMPT-FIX-007 | Stale metadata dates | 32 | Proposed | Pending |
| PROMPT-FIX-008 | Missing story sizing | 40 | Proposed | Pending |
| PROMPT-FIX-009 | Complexity indicator (S/M/L/XL) | 42 | **Applied** | Added to ai_service.py rule 3 + SKILL.md — 2026-02-08 |
| PROMPT-FIX-010 | Ban generic "user"/"system user" personas | 46 | **Applied** | Strengthened rule 6 in both prompts — 2026-02-08 |
| PROMPT-FIX-011 | Ban UI implementation details in ACs | 46 | **Applied** | New rule 8 in both prompts — 2026-02-08 |
| PROMPT-FIX-012 | No duplicate document titles | 38 | **Applied** | New rule 9 in both prompts — 2026-02-08 |
| PROMPT-FIX-013 | Enforce current date (no hallucination) | 42 | **Applied** | Strengthened artifact_metadata in ai_service.py — 2026-02-08 |
| PROMPT-FIX-014 | Post-generation concept definition scan | 54 | **Applied** | Strengthened rule 7 in both prompts — 2026-02-08 |

---

## Score Trend

| Document | Date | Score | Verdict |
|----------|------|-------|---------|
| BA Assistant BRD | 2026-02-08 | 82/100 | Usable with Fixes (High) |
| BA AI Assistant User Stories | 2026-02-08 | 71/100 | Usable with Fixes |
| Prompt Enhancement User Stories | 2026-02-08 | 68/100 | Significant Rework (Upper) |
| Smart Inventory Forecasting | 2026-02-08 | 52/100 | Significant Rework |

**Observation:** The BA Assistant BRD scored highest (82/100), demonstrating:
- Complete BRD template with all 13 sections
- 4 detailed personas with technical proficiency levels
- User flows including error scenarios
- Stakeholder analysis with concerns
- Risk matrix with mitigation strategies
- Measurable KPIs with timelines

**Key pattern:** BRDs score higher than User Stories when they include business context, stakeholder analysis, and risk assessment sections that User Stories typically omit.

**Root cause identified and corrected (evaluation #3):** Initial analysis pointed to `.planning/legacy/SYSTEM-PROMPT-business-analyst.md` as missing quality gates. Investigation revealed this file was stale — the actual production prompt in `ai_service.py` already had most quality gates (7 user story rules, 13 validation checks). Only 4 targeted gaps remained: complexity sizing, generic persona ban, UI implementation details ban, and duplicate title prevention. All 4 gaps fixed on 2026-02-08 in both `ai_service.py` and `SKILL.md`. Legacy file marked stale.

**Positive signal:** The model naturally produces error scenarios, priorities, dependencies, and configurable thresholds even when not explicitly instructed. With the strengthened rules, scores should improve to 80-85+ on next evaluation.

**UI implementation leakage (new pattern):** Appeared for first time in Prompt Enhancement document. Fixed via PROMPT-FIX-011 (new rule 8 in both prompts).

---

*Last updated: 2026-02-08 22:30*
*Revision 1.1: Root cause analysis updated for evaluation #3 after confirming generation source (production system prompt)*
