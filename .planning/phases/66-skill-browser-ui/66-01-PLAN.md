---
phase: 66-skill-browser-ui
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - frontend/lib/models/skill.dart
  - frontend/lib/utils/skill_emoji.dart
  - frontend/lib/screens/assistant/widgets/skill_card.dart
autonomous: true
requirements: [BROWSE-02]

must_haves:
  truths:
    - "Skill model includes features field parsed from API response"
    - "Each skill has a mapped emoji icon (with fallback for unknowns)"
    - "Skill card displays emoji, name, description, and up to 3 feature bullets"
  artifacts:
    - path: "frontend/lib/models/skill.dart"
      provides: "Skill model with features field"
      contains: "List<String> features"
    - path: "frontend/lib/utils/skill_emoji.dart"
      provides: "Emoji mapping for skill names"
      exports: ["getSkillEmoji"]
    - path: "frontend/lib/screens/assistant/widgets/skill_card.dart"
      provides: "Individual skill card widget for grid display"
      contains: "class SkillCard"
  key_links:
    - from: "frontend/lib/screens/assistant/widgets/skill_card.dart"
      to: "frontend/lib/models/skill.dart"
      via: "Skill model import"
      pattern: "import.*models/skill"
    - from: "frontend/lib/screens/assistant/widgets/skill_card.dart"
      to: "frontend/lib/utils/skill_emoji.dart"
      via: "getSkillEmoji function call"
      pattern: "getSkillEmoji"
---

<objective>
Create the foundation components for the skill browser: update the Skill model to include the `features` field from the Phase 65 API, create an emoji mapping utility, and build the SkillCard widget that displays skill information in a card layout.

Purpose: These components are prerequisites for the browser sheet (Plan 66-02). The Skill model must parse features from the API, cards need emoji icons, and the card widget encapsulates the visual design.

Output: Updated Skill model, emoji helper utility, and reusable SkillCard widget.
</objective>

<execution_context>
@/Users/a1testingmac/.claude/get-shit-done/workflows/execute-plan.md
@/Users/a1testingmac/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/66-skill-browser-ui/66-CONTEXT.md
@.planning/phases/66-skill-browser-ui/66-RESEARCH.md

@frontend/lib/models/skill.dart
@frontend/lib/widgets/responsive_layout.dart
@frontend/lib/core/config.dart
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add features field to Skill model and create emoji helper</name>
  <files>
    frontend/lib/models/skill.dart
    frontend/lib/utils/skill_emoji.dart
  </files>
  <action>
**Skill model update** (`frontend/lib/models/skill.dart`):
- Add `final List<String> features;` field to the Skill class
- Add `features` to constructor with `this.features = const []` default
- Update `fromJson` to parse features: `(json['features'] as List<dynamic>?)?.map((e) => e as String).toList() ?? []`
- Update `toJson` to include `'features': features`
- Keep existing `displayName` getter â€” the API now returns human-readable names in the `name` field, but `displayName` still works for backward compatibility

**Note on displayName:** The Phase 65 API already returns human-readable names (e.g., "Business Analyst" not "business-analyst"). The `displayName` getter will capitalize an already-capitalized name harmlessly. The skill card (Task 2) should use `skill.name` directly since it's already human-readable from the API.

**Emoji helper** (`frontend/lib/utils/skill_emoji.dart`):
- Create file with a `getSkillEmoji(String skillName)` function
- Hardcoded map of skill names to emoji strings:
  - 'Business Analyst': 'ðŸ“Š'
  - 'QA BFF': 'ðŸ§ª'
  - 'Software Architect': 'ðŸ—ï¸'
  - 'Prompt Enhancer': 'âœ¨'
  - 'Judge': 'âš–ï¸'
  - 'Instructions Creator': 'ðŸ“'
  - 'Evaluator Ba Docs': 'ðŸ“‹'
  - 'Skill Transformer': 'ðŸ”„'
  - 'Task Delegation': 'ðŸŽ¯'
  - 'TL Assistant': 'ðŸ‘”'
- Default/fallback emoji: 'ðŸ”§' (for unknown skill names)
- Simple pattern: `String getSkillEmoji(String skillName) => _emojiMap[skillName] ?? 'ðŸ”§';`
  </action>
  <verify>
- `dart analyze frontend/lib/models/skill.dart` â€” no errors
- `dart analyze frontend/lib/utils/skill_emoji.dart` â€” no errors
- Skill.fromJson with features array returns Skill with populated features list
- Skill.fromJson without features key returns Skill with empty features list
- getSkillEmoji('Business Analyst') returns 'ðŸ“Š'
- getSkillEmoji('Unknown Skill') returns 'ðŸ”§'
  </verify>
  <done>Skill model has features field that parses from API JSON. Emoji helper returns correct emoji for each of the 10 known skills with fallback for unknowns.</done>
</task>

<task type="auto">
  <name>Task 2: Create SkillCard widget with emoji, name, description, and features</name>
  <files>
    frontend/lib/screens/assistant/widgets/skill_card.dart
  </files>
  <action>
Create `frontend/lib/screens/assistant/widgets/skill_card.dart`:

**Widget:** `SkillCard` â€” a StatelessWidget that displays a single skill in a card format.

**Constructor parameters:**
- `required Skill skill` â€” the skill to display
- `required VoidCallback onTap` â€” callback when card is tapped
- `bool isSelected` (default false) â€” whether this card is currently in selected state (for highlight animation)

**Card layout (per user decision â€” grid of cards with emoji, name, description, features):**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ðŸ“Š  Business Analyst  â”‚  â† Row: emoji (fontSize 28) + name (titleMedium, bold)
â”‚                        â”‚
â”‚  Helps you gather...   â”‚  â† description (bodySmall, onSurfaceVariant, maxLines: 2)
â”‚                        â”‚
â”‚  â€¢ Feature 1           â”‚  â† features (bodySmall, up to 3 items)
â”‚  â€¢ Feature 2           â”‚
â”‚  â€¢ Feature 3           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Implementation details:**
- Outer widget: `AnimatedContainer` with duration 150ms for selection highlight
  - When `isSelected`: background color = `theme.colorScheme.primaryContainer.withValues(alpha: 0.5)`, scale via `AnimatedScale` with `scale: isSelected ? 0.97 : 1.0`
  - When not selected: default card background
- Inner: `Card` with `clipBehavior: Clip.antiAlias`, `elevation: 1`
  - `InkWell` wrapping content for tap ripple, `onTap: onTap`
  - `Padding(padding: EdgeInsets.all(16))`
  - `Column(crossAxisAlignment: CrossAxisAlignment.start, mainAxisSize: MainAxisSize.min)`

**Row 1 â€” Emoji + Name:**
- `Row` with:
  - `Text(getSkillEmoji(skill.name), style: TextStyle(fontSize: 28))` â€” emoji icon
  - `SizedBox(width: 12)`
  - `Expanded(child: Text(skill.name, style: theme.textTheme.titleMedium?.copyWith(fontWeight: FontWeight.bold), maxLines: 1, overflow: TextOverflow.ellipsis))`

**Row 2 â€” Description:**
- `SizedBox(height: 8)`
- `Text(skill.description, style: theme.textTheme.bodySmall?.copyWith(color: theme.colorScheme.onSurfaceVariant), maxLines: 2, overflow: TextOverflow.ellipsis)`

**Row 3 â€” Features (first 3 only):**
- `SizedBox(height: 8)`
- `...skill.features.take(3).map((feature) => ...)` â€” each feature is a Row with bullet + text
- Each feature: `Padding(padding: EdgeInsets.only(bottom: 2), child: Row(crossAxisAlignment: CrossAxisAlignment.start, children: [Text('â€¢ ', style: featureStyle), Expanded(child: Text(feature, style: featureStyle, maxLines: 1, overflow: TextOverflow.ellipsis))]))`
- Feature text style: `theme.textTheme.bodySmall?.copyWith(color: theme.colorScheme.onSurfaceVariant, fontSize: 11)`
- If `skill.features.isEmpty`, skip the features section entirely

**Import:** Use `getSkillEmoji` from `../../../utils/skill_emoji.dart` and `Skill` from `../../../models/skill.dart`.
  </action>
  <verify>
- `dart analyze frontend/lib/screens/assistant/widgets/skill_card.dart` â€” no errors
- Widget accepts Skill object and renders emoji, name, description, features
- Selection highlight changes background color when isSelected=true
- Features section hidden when skill has no features
  </verify>
  <done>SkillCard widget renders skill information in a card layout with emoji icon, name, 1-2 line description, and up to 3 feature bullets. Selection state visually highlights the card.</done>
</task>

</tasks>

<verification>
1. `dart analyze frontend/lib/models/skill.dart` â€” clean
2. `dart analyze frontend/lib/utils/skill_emoji.dart` â€” clean
3. `dart analyze frontend/lib/screens/assistant/widgets/skill_card.dart` â€” clean
4. All three files exist and are importable
5. Skill model can round-trip features through fromJson/toJson
</verification>

<success_criteria>
- Skill model includes features field with proper JSON parsing and default empty list
- Emoji helper maps all 10 known skills to emojis with fallback
- SkillCard widget displays all skill information in the user-specified card layout
- All files pass dart analyze without errors
</success_criteria>

<output>
After completion, create `.planning/phases/66-skill-browser-ui/66-01-SUMMARY.md`
</output>
